# Experiment Configuration for CounterFactual DiCE - Red Wine Quality Dataset
# Wine Quality: ~1600 samples (red), 11 features (all numerical), binarized quality

experiment:
  name: "counterfactual_dice_wine_quality"
  project: "counterfactual-dpg"
  entity: "mllab-ts-universit-di-trieste"
  tags: ["baseline", "wine-quality", "dice", "binary"]
  notes: "DiCE counterfactual generation on wine quality dataset for comparison with DPG"

data:
  dataset: "red_wine_quality"
  dataset_path: "configs/red_wine_quality/dataset.csv"
  target_column: "quality"
  test_size: 0.3
  random_state: 42
  # Binarize quality: >= 6 is "good" (1), < 6 is "bad" (0)
  binarize_target: true
  binarize_threshold: 6
  # All features are numerical physicochemical properties
  continuous_features:
    - "fixed acidity"
    - "volatile acidity"
    - "citric acid"
    - "residual sugar"
    - "chlorides"
    - "free sulfur dioxide"
    - "total sulfur dioxide"
    - "density"
    - "pH"
    - "sulphates"
    - "alcohol"
  categorical_features: []

model:
  type: "RandomForestClassifier"
  n_estimators: 50
  random_state: 42

counterfactual:
  method: "dice"
  
  # DiCE-specific parameters
  total_CFs: 4
  generation_method: "genetic"
  proximity_weight: 0.5
  diversity_weight: 1.0
  
  # Actionability rules - wine production constraints
  rules: ["none"]
  actionability:
    alcohol: "non_decreasing"
    fixed acidity: "non_increasing"
    volatile acidity: "none"
    citric acid: "none"
    residual sugar: "none"
    chlorides: "none"
    free sulfur dioxide: "none"
    total sulfur dioxide: "none"
    density: "none"
    pH: "none"
    sulphates: "none"
  
  # DPG parameters (kept for reference/switching)
  diversity_weight_dpg: 1.5
  repulsion_weight: 2.0
  boundary_weight: 12.0
  distance_factor: 1.5
  sparsity_factor: 1.0
  constraints_factor: 3.0
  original_escape_weight: 2.0
  escape_pressure: 0.5
  prioritize_non_overlapping: true
  max_bonus_cap: 50.0
  
  # Runtime parameters
  population_size: 50
  max_generations: 60
  mutation_rate: 0.3
  delta_threshold: 0.01
  patience: 20

experiment_params:
  seed: 42
  sample_indices: null
  num_samples: 10
  num_combinations_to_test: 1
  num_replications: 3
  compute_comprehensive_metrics: true
  parallel_replications: true
  max_workers: null

output:
  local_dir: "experiment_results"
  save_visualizations: true
  save_raw_data: true
  save_visualization_images: true
